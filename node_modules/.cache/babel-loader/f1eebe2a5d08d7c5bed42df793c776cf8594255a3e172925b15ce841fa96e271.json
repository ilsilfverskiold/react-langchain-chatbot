{"ast":null,"code":"import { getBufferString } from \"../../memory/base.js\";\nimport { getEnvironmentVariable } from \"../../util/env.js\";\nimport { BaseTracer } from \"./tracer.js\";\nexport class LangChainTracerV1 extends BaseTracer {\n  constructor() {\n    super();\n    Object.defineProperty(this, \"name\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: \"langchain_tracer\"\n    });\n    Object.defineProperty(this, \"endpoint\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: getEnvironmentVariable(\"LANGCHAIN_ENDPOINT\") || \"http://localhost:1984\"\n    });\n    Object.defineProperty(this, \"headers\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: {\n        \"Content-Type\": \"application/json\"\n      }\n    });\n    Object.defineProperty(this, \"session\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    const apiKey = getEnvironmentVariable(\"LANGCHAIN_API_KEY\");\n    if (apiKey) {\n      this.headers[\"x-api-key\"] = apiKey;\n    }\n  }\n  async newSession(sessionName) {\n    const sessionCreate = {\n      start_time: Date.now(),\n      name: sessionName\n    };\n    const session = await this.persistSession(sessionCreate);\n    this.session = session;\n    return session;\n  }\n  async loadSession(sessionName) {\n    const endpoint = `${this.endpoint}/sessions?name=${sessionName}`;\n    return this._handleSessionResponse(endpoint);\n  }\n  async loadDefaultSession() {\n    const endpoint = `${this.endpoint}/sessions?name=default`;\n    return this._handleSessionResponse(endpoint);\n  }\n  async convertV2RunToRun(run) {\n    const session = this.session ?? (await this.loadDefaultSession());\n    const serialized = run.serialized;\n    let runResult;\n    if (run.run_type === \"llm\") {\n      const prompts = run.inputs.prompts ? run.inputs.prompts : run.inputs.messages.map(x => getBufferString(x));\n      const llmRun = {\n        uuid: run.id,\n        start_time: run.start_time,\n        end_time: run.end_time,\n        execution_order: run.execution_order,\n        child_execution_order: run.child_execution_order,\n        serialized,\n        type: run.run_type,\n        session_id: session.id,\n        prompts,\n        response: run.outputs\n      };\n      runResult = llmRun;\n    } else if (run.run_type === \"chain\") {\n      const child_runs = await Promise.all(run.child_runs.map(child_run => this.convertV2RunToRun(child_run)));\n      const chainRun = {\n        uuid: run.id,\n        start_time: run.start_time,\n        end_time: run.end_time,\n        execution_order: run.execution_order,\n        child_execution_order: run.child_execution_order,\n        serialized,\n        type: run.run_type,\n        session_id: session.id,\n        inputs: run.inputs,\n        outputs: run.outputs,\n        child_llm_runs: child_runs.filter(child_run => child_run.type === \"llm\"),\n        child_chain_runs: child_runs.filter(child_run => child_run.type === \"chain\"),\n        child_tool_runs: child_runs.filter(child_run => child_run.type === \"tool\")\n      };\n      runResult = chainRun;\n    } else if (run.run_type === \"tool\") {\n      const child_runs = await Promise.all(run.child_runs.map(child_run => this.convertV2RunToRun(child_run)));\n      const toolRun = {\n        uuid: run.id,\n        start_time: run.start_time,\n        end_time: run.end_time,\n        execution_order: run.execution_order,\n        child_execution_order: run.child_execution_order,\n        serialized,\n        type: run.run_type,\n        session_id: session.id,\n        tool_input: run.inputs.input,\n        output: run.outputs?.output,\n        action: JSON.stringify(serialized),\n        child_llm_runs: child_runs.filter(child_run => child_run.type === \"llm\"),\n        child_chain_runs: child_runs.filter(child_run => child_run.type === \"chain\"),\n        child_tool_runs: child_runs.filter(child_run => child_run.type === \"tool\")\n      };\n      runResult = toolRun;\n    } else {\n      throw new Error(`Unknown run type: ${run.run_type}`);\n    }\n    return runResult;\n  }\n  async persistRun(run) {\n    let endpoint;\n    let v1Run;\n    if (run.run_type !== undefined) {\n      v1Run = await this.convertV2RunToRun(run);\n    } else {\n      v1Run = run;\n    }\n    if (v1Run.type === \"llm\") {\n      endpoint = `${this.endpoint}/llm-runs`;\n    } else if (v1Run.type === \"chain\") {\n      endpoint = `${this.endpoint}/chain-runs`;\n    } else {\n      endpoint = `${this.endpoint}/tool-runs`;\n    }\n    const response = await fetch(endpoint, {\n      method: \"POST\",\n      headers: this.headers,\n      body: JSON.stringify(v1Run)\n    });\n    if (!response.ok) {\n      console.error(`Failed to persist run: ${response.status} ${response.statusText}`);\n    }\n  }\n  async persistSession(sessionCreate) {\n    const endpoint = `${this.endpoint}/sessions`;\n    const response = await fetch(endpoint, {\n      method: \"POST\",\n      headers: this.headers,\n      body: JSON.stringify(sessionCreate)\n    });\n    if (!response.ok) {\n      console.error(`Failed to persist session: ${response.status} ${response.statusText}, using default session.`);\n      return {\n        id: 1,\n        ...sessionCreate\n      };\n    }\n    return {\n      id: (await response.json()).id,\n      ...sessionCreate\n    };\n  }\n  async _handleSessionResponse(endpoint) {\n    const response = await fetch(endpoint, {\n      method: \"GET\",\n      headers: this.headers\n    });\n    let tracerSession;\n    if (!response.ok) {\n      console.error(`Failed to load session: ${response.status} ${response.statusText}`);\n      tracerSession = {\n        id: 1,\n        start_time: Date.now()\n      };\n      this.session = tracerSession;\n      return tracerSession;\n    }\n    const resp = await response.json();\n    if (resp.length === 0) {\n      tracerSession = {\n        id: 1,\n        start_time: Date.now()\n      };\n      this.session = tracerSession;\n      return tracerSession;\n    }\n    [tracerSession] = resp;\n    this.session = tracerSession;\n    return tracerSession;\n  }\n}","map":{"version":3,"names":["getBufferString","getEnvironmentVariable","BaseTracer","LangChainTracerV1","constructor","Object","defineProperty","enumerable","configurable","writable","value","apiKey","headers","newSession","sessionName","sessionCreate","start_time","Date","now","name","session","persistSession","loadSession","endpoint","_handleSessionResponse","loadDefaultSession","convertV2RunToRun","run","serialized","runResult","run_type","prompts","inputs","messages","map","x","llmRun","uuid","id","end_time","execution_order","child_execution_order","type","session_id","response","outputs","child_runs","Promise","all","child_run","chainRun","child_llm_runs","filter","child_chain_runs","child_tool_runs","toolRun","tool_input","input","output","action","JSON","stringify","Error","persistRun","v1Run","undefined","fetch","method","body","ok","console","error","status","statusText","json","tracerSession","resp","length"],"sources":["/Users/idasilfverskiold/gptSandbox/reactlangchain/sandbox/node_modules/langchain/dist/callbacks/handlers/tracer_langchain_v1.js"],"sourcesContent":["import { getBufferString } from \"../../memory/base.js\";\nimport { getEnvironmentVariable } from \"../../util/env.js\";\nimport { BaseTracer } from \"./tracer.js\";\nexport class LangChainTracerV1 extends BaseTracer {\n    constructor() {\n        super();\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"langchain_tracer\"\n        });\n        Object.defineProperty(this, \"endpoint\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: getEnvironmentVariable(\"LANGCHAIN_ENDPOINT\") || \"http://localhost:1984\"\n        });\n        Object.defineProperty(this, \"headers\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: {\n                \"Content-Type\": \"application/json\",\n            }\n        });\n        Object.defineProperty(this, \"session\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        const apiKey = getEnvironmentVariable(\"LANGCHAIN_API_KEY\");\n        if (apiKey) {\n            this.headers[\"x-api-key\"] = apiKey;\n        }\n    }\n    async newSession(sessionName) {\n        const sessionCreate = {\n            start_time: Date.now(),\n            name: sessionName,\n        };\n        const session = await this.persistSession(sessionCreate);\n        this.session = session;\n        return session;\n    }\n    async loadSession(sessionName) {\n        const endpoint = `${this.endpoint}/sessions?name=${sessionName}`;\n        return this._handleSessionResponse(endpoint);\n    }\n    async loadDefaultSession() {\n        const endpoint = `${this.endpoint}/sessions?name=default`;\n        return this._handleSessionResponse(endpoint);\n    }\n    async convertV2RunToRun(run) {\n        const session = this.session ?? (await this.loadDefaultSession());\n        const serialized = run.serialized;\n        let runResult;\n        if (run.run_type === \"llm\") {\n            const prompts = run.inputs.prompts\n                ? run.inputs.prompts\n                : run.inputs.messages.map((x) => getBufferString(x));\n            const llmRun = {\n                uuid: run.id,\n                start_time: run.start_time,\n                end_time: run.end_time,\n                execution_order: run.execution_order,\n                child_execution_order: run.child_execution_order,\n                serialized,\n                type: run.run_type,\n                session_id: session.id,\n                prompts,\n                response: run.outputs,\n            };\n            runResult = llmRun;\n        }\n        else if (run.run_type === \"chain\") {\n            const child_runs = await Promise.all(run.child_runs.map((child_run) => this.convertV2RunToRun(child_run)));\n            const chainRun = {\n                uuid: run.id,\n                start_time: run.start_time,\n                end_time: run.end_time,\n                execution_order: run.execution_order,\n                child_execution_order: run.child_execution_order,\n                serialized,\n                type: run.run_type,\n                session_id: session.id,\n                inputs: run.inputs,\n                outputs: run.outputs,\n                child_llm_runs: child_runs.filter((child_run) => child_run.type === \"llm\"),\n                child_chain_runs: child_runs.filter((child_run) => child_run.type === \"chain\"),\n                child_tool_runs: child_runs.filter((child_run) => child_run.type === \"tool\"),\n            };\n            runResult = chainRun;\n        }\n        else if (run.run_type === \"tool\") {\n            const child_runs = await Promise.all(run.child_runs.map((child_run) => this.convertV2RunToRun(child_run)));\n            const toolRun = {\n                uuid: run.id,\n                start_time: run.start_time,\n                end_time: run.end_time,\n                execution_order: run.execution_order,\n                child_execution_order: run.child_execution_order,\n                serialized,\n                type: run.run_type,\n                session_id: session.id,\n                tool_input: run.inputs.input,\n                output: run.outputs?.output,\n                action: JSON.stringify(serialized),\n                child_llm_runs: child_runs.filter((child_run) => child_run.type === \"llm\"),\n                child_chain_runs: child_runs.filter((child_run) => child_run.type === \"chain\"),\n                child_tool_runs: child_runs.filter((child_run) => child_run.type === \"tool\"),\n            };\n            runResult = toolRun;\n        }\n        else {\n            throw new Error(`Unknown run type: ${run.run_type}`);\n        }\n        return runResult;\n    }\n    async persistRun(run) {\n        let endpoint;\n        let v1Run;\n        if (run.run_type !== undefined) {\n            v1Run = await this.convertV2RunToRun(run);\n        }\n        else {\n            v1Run = run;\n        }\n        if (v1Run.type === \"llm\") {\n            endpoint = `${this.endpoint}/llm-runs`;\n        }\n        else if (v1Run.type === \"chain\") {\n            endpoint = `${this.endpoint}/chain-runs`;\n        }\n        else {\n            endpoint = `${this.endpoint}/tool-runs`;\n        }\n        const response = await fetch(endpoint, {\n            method: \"POST\",\n            headers: this.headers,\n            body: JSON.stringify(v1Run),\n        });\n        if (!response.ok) {\n            console.error(`Failed to persist run: ${response.status} ${response.statusText}`);\n        }\n    }\n    async persistSession(sessionCreate) {\n        const endpoint = `${this.endpoint}/sessions`;\n        const response = await fetch(endpoint, {\n            method: \"POST\",\n            headers: this.headers,\n            body: JSON.stringify(sessionCreate),\n        });\n        if (!response.ok) {\n            console.error(`Failed to persist session: ${response.status} ${response.statusText}, using default session.`);\n            return {\n                id: 1,\n                ...sessionCreate,\n            };\n        }\n        return {\n            id: (await response.json()).id,\n            ...sessionCreate,\n        };\n    }\n    async _handleSessionResponse(endpoint) {\n        const response = await fetch(endpoint, {\n            method: \"GET\",\n            headers: this.headers,\n        });\n        let tracerSession;\n        if (!response.ok) {\n            console.error(`Failed to load session: ${response.status} ${response.statusText}`);\n            tracerSession = {\n                id: 1,\n                start_time: Date.now(),\n            };\n            this.session = tracerSession;\n            return tracerSession;\n        }\n        const resp = (await response.json());\n        if (resp.length === 0) {\n            tracerSession = {\n                id: 1,\n                start_time: Date.now(),\n            };\n            this.session = tracerSession;\n            return tracerSession;\n        }\n        [tracerSession] = resp;\n        this.session = tracerSession;\n        return tracerSession;\n    }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}