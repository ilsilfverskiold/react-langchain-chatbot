{"ast":null,"code":"import PQueueMod from \"p-queue\";\nlet queue;\nfunction createQueue() {\n  const PQueue = \"default\" in PQueueMod ? PQueueMod.default : PQueueMod;\n  return new PQueue({\n    autoStart: true,\n    concurrency: 1\n  });\n}\n/**\n * Consume a promise, either adding it to the queue or waiting for it to resolve\n * @param promise Promise to consume\n * @param wait Whether to wait for the promise to resolve or resolve immediately\n */\nexport async function consumeCallback(promiseFn, wait) {\n  if (wait === true) {\n    await promiseFn();\n  } else {\n    if (typeof queue === \"undefined\") {\n      queue = createQueue();\n    }\n    void queue.add(promiseFn);\n  }\n}\nexport function awaitAllCallbacks() {\n  return typeof queue !== \"undefined\" ? queue.onIdle() : Promise.resolve();\n}","map":{"version":3,"names":["PQueueMod","queue","createQueue","PQueue","default","autoStart","concurrency","consumeCallback","promiseFn","wait","add","awaitAllCallbacks","onIdle","Promise","resolve"],"sources":["/Users/idasilfverskiold/gptSandbox/reactlangchain/sandbox/node_modules/langchain/dist/callbacks/promises.js"],"sourcesContent":["import PQueueMod from \"p-queue\";\nlet queue;\nfunction createQueue() {\n    const PQueue = \"default\" in PQueueMod ? PQueueMod.default : PQueueMod;\n    return new PQueue({\n        autoStart: true,\n        concurrency: 1,\n    });\n}\n/**\n * Consume a promise, either adding it to the queue or waiting for it to resolve\n * @param promise Promise to consume\n * @param wait Whether to wait for the promise to resolve or resolve immediately\n */\nexport async function consumeCallback(promiseFn, wait) {\n    if (wait === true) {\n        await promiseFn();\n    }\n    else {\n        if (typeof queue === \"undefined\") {\n            queue = createQueue();\n        }\n        void queue.add(promiseFn);\n    }\n}\nexport function awaitAllCallbacks() {\n    return typeof queue !== \"undefined\" ? queue.onIdle() : Promise.resolve();\n}\n"],"mappings":"AAAA,OAAOA,SAAS,MAAM,SAAS;AAC/B,IAAIC,KAAK;AACT,SAASC,WAAWA,CAAA,EAAG;EACnB,MAAMC,MAAM,GAAG,SAAS,IAAIH,SAAS,GAAGA,SAAS,CAACI,OAAO,GAAGJ,SAAS;EACrE,OAAO,IAAIG,MAAM,CAAC;IACdE,SAAS,EAAE,IAAI;IACfC,WAAW,EAAE;EACjB,CAAC,CAAC;AACN;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,eAAeC,eAAeA,CAACC,SAAS,EAAEC,IAAI,EAAE;EACnD,IAAIA,IAAI,KAAK,IAAI,EAAE;IACf,MAAMD,SAAS,CAAC,CAAC;EACrB,CAAC,MACI;IACD,IAAI,OAAOP,KAAK,KAAK,WAAW,EAAE;MAC9BA,KAAK,GAAGC,WAAW,CAAC,CAAC;IACzB;IACA,KAAKD,KAAK,CAACS,GAAG,CAACF,SAAS,CAAC;EAC7B;AACJ;AACA,OAAO,SAASG,iBAAiBA,CAAA,EAAG;EAChC,OAAO,OAAOV,KAAK,KAAK,WAAW,GAAGA,KAAK,CAACW,MAAM,CAAC,CAAC,GAAGC,OAAO,CAACC,OAAO,CAAC,CAAC;AAC5E"},"metadata":{},"sourceType":"module","externalDependencies":[]}